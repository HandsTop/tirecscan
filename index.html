<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tires</title>

  <!-- Scanner -->
  <script src="https://unpkg.com/html5-qrcode"></script>

  <!-- CSS -->
  <link rel="stylesheet" href="./styles.css">
</head>

<body>
<header>
  <div class="row" style="align-items:center;">
    <button id="menuBtn" class="menuBtn" aria-label="menu">⋯</button>
    <div class="col" style="min-width:180px;">
      <b id="uiTitle">Tires</b>
      <div class="muted" id="pageSubtitle" style="margin-top:4px;"></div>
    </div>
  </div>
</header>

<!-- Menu overlay -->
<div id="menuBack" class="menuBack"></div>
<div id="menuPanel" class="menuPanel" role="menu">
  <button id="menuHome" class="menuItem"></button>
  <button id="menuScan" class="menuItem"></button>

  <div class="menuBlock">
    <div class="menuTitle" id="menuSettingsTitle"></div>

    <label id="lblLang" style="margin-top:0;"></label>
    <select id="lang">
      <option value="ru">RU</option>
      <option value="de">DE</option>
      <option value="lv">LV</option>
    </select>

    <label id="lblUser" style="margin-top:10px;"></label>
    <input id="username" />
    <button id="confirmUser" class="primary"></button>

    <div class="muted" id="userHint"></div>
    <div class="pill" id="rolePill" style="display:none;"></div>
  </div>

  <div class="menuBlock">
    <div class="menuTitle" id="menuAdminTitle"></div>

    <!-- Админ логин: email/password -->
    <label style="margin-top:0;">Email</label>
    <input id="adminEmail" type="email" autocomplete="username" />

    <label>Password</label>
    <input id="adminPass" type="password" autocomplete="current-password" />

    <button id="adminLogin" class="ghost"></button>
    <div class="muted" id="adminHint"></div>

    <!-- Кнопка "сделать админом" (видна только админу) -->
    <div id="makeAdminBox" style="display:none;margin-top:10px;">
      <label>Make user admin (UID)</label>
      <input id="makeAdminUid" />
      <button id="makeAdminBtn" class="primary">Grant admin</button>
      <div class="muted" id="makeAdminHint"></div>
    </div>
  </div>

<main>
  <!-- HOME -->
  <section id="pageHome" class="homeFull" style="display:none;">
    <img class="homeLogo" src="logo.png" alt="Logo">
  </section>

  <!-- SCAN -->
  <div id="pageScan" style="display:none;">

    <!-- Scanner (ALL USERS) -->
    <section id="scannerCard" class="card" style="display:none;">
      <div class="row" style="align-items:flex-start;">
        <div class="col"><button id="start" class="primary" style="margin-top:0;"></button></div>
        <div class="col"><button id="stop" class="danger" style="margin-top:0;" disabled></button></div>
      </div>
      <div id="reader"></div>
      <div class="muted" id="status"></div>
      <div class="muted" id="scanHint"></div>
    </section>

    <!-- Form (ADMIN ONLY) -->
    <section id="formCard" class="card" style="display:none;">
      <label id="lblEan"></label>
      <input id="ean" inputmode="numeric" />

      <div class="row" style="margin-top:10px;">
        <div class="col">
          <label id="lblMaker" style="margin-top:0;"></label>
          <input id="maker" />
        </div>
        <div class="col">
          <label id="lblTireModel" style="margin-top:0;"></label>
          <input id="tireModel" />
        </div>
      </div>

      <label id="lblSize"></label>
      <input id="size" />

      <div class="row" style="margin-top:10px;">
        <div class="col">
          <label id="lblLoc" style="margin-top:0;"></label>
          <input id="loc" />
        </div>
        <div class="col">
          <label id="lblQty" style="margin-top:0;"></label>
          <input id="qty" type="number" min="0" />
        </div>
      </div>

      <div class="row" style="margin-top:12px;">
        <div class="col"><button id="save" class="primary" style="margin-top:0;"></button></div>
        <div class="col"><button id="clear" class="ghost" style="margin-top:0;"></button></div>
      </div>

      <div class="muted" id="rightsHint"></div>
    </section>

    <!-- List -->
    <section class="card">
      <div class="row" style="align-items:center;">
        <div class="col"><b id="listTitle"></b></div>
        <div class="col">
          <button id="openGlobalHistory" class="ghost" style="margin-top:0;"></button>
        </div>
      </div>

      <div class="toolbar">
        <input id="search" />

        <div class="row">
          <div class="col">
            <label id="lblGroup" style="margin-top:0;"></label>
            <select id="groupBy">
              <option value="location"></option>
              <option value="maker"></option>
              <option value="none"></option>
            </select>
          </div>
        </div>
      </div>

      <div class="muted" id="stats" style="margin-top:10px;"></div>
      <div id="list"></div>
    </section>

  </div>
</main>

<!-- Modal -->
<div id="modalBack" class="modalBack" role="dialog" aria-modal="true">
  <div class="modal">
    <div class="modalTop">
      <b id="modalTitle"></b>
      <button id="modalClose" class="modalClose"></button>
    </div>
    <div id="modalBody"></div>
  </div>
</div>

<!-- Error overlay -->
<div id="errBox" class="errBox">
  <div class="card" style="border-color:#5a1a1a;">
    <b>Ошибка JavaScript</b>
    <div class="muted">Скопируй текст ниже и пришли мне.</div>
    <pre id="errText" class="mono"></pre>
  </div>
</div>

<script type="module" src="./app.js"></script>
</body>
</html>

